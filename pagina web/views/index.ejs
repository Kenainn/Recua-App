<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recua Dashboard</title>
  <link rel="stylesheet" href="./css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar">
    <button id="toggleSidebar" class="sidebar-toggle">
      <i data-lucide="menu"></i>
    </button>
    <h1>Recua Dashboard</h1>
  </nav>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <ul></ul>
    <hr>

    <div class="user-sidebar">
      <div class="user-main" id="userMain">
        <div style="font-size: 2.5rem; margin-bottom: 10px;">
          <%= usuario.tipo==='profesor' ? 'ðŸŽ“' : (usuario.tipo==='admin' ? 'ðŸ›¡ï¸' : 'ðŸ‘¤' ) %>
        </div>
        <p id="sidebar-username-main">
          <%= usuario.nombre %>
        </p>
      </div>

      <div class="user-info-sidebar" id="userInfoSidebar">
        <p id="sidebar-username">
          <%= usuario.nombre %>
        </p>
        <p id="sidebar-email">
          <%= usuario.correo %>
        </p>
        <p id="sidebar-role">
          <%= usuario.tipo.toUpperCase() %>
        </p>
        <button id="logout-btn">Cerrar SesiÃ³n</button>
      </div>
    </div>

    <button id="closeSidebar" class="sidebar-close">âœ– Ocultar</button>
  </aside>

  <!-- Main -->
  <main class="main">

    <section class="streak">
      <div class="streak-header">
        <h1>Â¡Hola, <span id="username">
            <%= usuario.nombre.split(' ')[0] %></span>! ðŸ‘‹</h1>
        <p class="streak-subtitle">Â¿Listo para seguir aprendiendo con Yak?</p>
      </div>

      <div class="streak-cards horizontal-layout">

        <div class="card yak-card">
          <div class="yak-bg">
            <img src="/recuaimg/fondo/YAK BASE.png" alt="Yak" id="yak-image">
          </div>
          <div class="yak-exp-bar">
            <div class="exp-fill" id="exp-fill"></div>
          </div>
          <p class="exp-text" id="exp-text">0 / 200 exp</p>
        </div>

        <div class="card white-card horizontal-card">
          <div class="stat horizontal">
            <i data-lucide="flame" style="color:orange;"></i>
            <div><span id="current-streak">0</span> Racha Actual</div>
          </div>
          <div class="stat horizontal">
            <i data-lucide="award" style="color:gold;"></i>
            <div><span id="best-streak">0</span> Mejor Racha</div>
          </div>
        </div>

        <div class="card white-card horizontal-card">
          <div class="stat horizontal">
            <i data-lucide="book-open" style="color:#2196f3;"></i>
            <div><span id="subjects-count">0</span> Materias Activas</div>
          </div>
        </div>

        <div class="card white-card horizontal-card">
          <div class="stat horizontal">
            <i data-lucide="check-square" style="color:green;"></i>
            <div><span id="tasks-progress">0</span> Tareas Completadas</div>
          </div>
        </div>

      </div>
    </section>

    <div class="dashboard-lower" style="display:flex; gap:16px; flex-wrap:wrap; margin-top:20px;">

      <div class="tasks-board" style="flex:2; display:flex; flex-direction:column;">
        <h2>
          <i data-lucide="calendar" style="color:green;"></i> Tareas de hoy
        </h2>
        <div id="tasks-today" class="tasks-today-container"
          style="display:flex; flex-direction:column; gap:10px; margin-top:10px;">
        </div>
      </div>

      <div class="right-cards" style="flex:1; display:flex; flex-direction:column; gap:16px;">

        <div class="card white-card">
          <h3>PrÃ³ximas Tareas</h3>
          <ul id="upcoming-tasks" style="list-style:none; padding:0; margin:0;"></ul>
        </div>

        <div class="card white-card">
          <h3>Mis Materias</h3>
          <ul id="my-subjects" style="list-style:none; padding:0; margin:0;"></ul>
        </div>

      </div>
    </div>

  </main>

  <!-- Scripts -->
  <script src="./js/scripts.js"></script>

  <script>
    // El dashboard se inicializa automÃ¡ticamente desde js/scripts.js
  </script>

</body>

</html>